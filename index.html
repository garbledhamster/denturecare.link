<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="description" content="A comprehensive denture care guide for first-time wearers including history, maintenance tips, FAQs, and an interactive quiz to test your knowledge.">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Denture Care Guide for First-Time Wearers</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js" defer></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        fontFamily: {
          sans: ['Roboto', 'sans-serif'],
          display: ['Montserrat', 'sans-serif'],
        },
        colors: {
          primary: {
            DEFAULT: '#2563eb',
            light: '#3b82f6',
            dark: '#1d4ed8',
          },
          accent: {
            DEFAULT: '#10b981',
            hover: '#059669',
          }
        }
      },
    }
  };
</script>
<style>
  body {
    background: linear-gradient(to bottom right, #e0f2fe, #ffffff);
    padding-top: 2rem;
  }

  h1, h2, h3, h4 {
    margin-bottom: 0.75rem;
  }

  .markdown-content {
    margin-top: 1.5rem;
    line-height: 1.75;
    color: #4a4a4a;
    font-size: 1.1rem;
    font-family: 'Roboto', sans-serif;
  }

  .markdown-content h1,
  .markdown-content h2,
  .markdown-content h3,
  .markdown-content h4,
  .markdown-content h5,
  .markdown-content h6 {
    font-family: 'Montserrat', sans-serif;
    color: #1f2937;
    margin-top: 2rem;
    margin-bottom: 1rem;
    font-weight: 700;
  }

  .markdown-content h1 { font-size: 1.75rem; }
  .markdown-content h2 { font-size: 1.5rem; }
  .markdown-content h3 { font-size: 1.3rem; }
  .markdown-content h4 { font-size: 1.2rem; }
  .markdown-content h5 { font-size: 1.1rem; }
  .markdown-content h6 { font-size: 1rem; font-weight: 600; }

  .markdown-content p {
    margin-bottom: 1.25rem;
  }

  .markdown-content a {
    color: #2563eb;
    text-decoration: underline;
    transition: color 0.2s ease;
  }

  .markdown-content a:hover,
  .markdown-content a:focus {
    color: #1d4ed8;
  }

  .markdown-content em {
    font-style: italic;
  }

  .markdown-content strong {
    font-weight: 700;
  }

  .markdown-content del {
    text-decoration: line-through;
    color: #6b7280; 
  }

  .markdown-content ul,
  .markdown-content ol {
    margin-bottom: 1.25rem;
    padding-left: 1.5rem;
  }

  .markdown-content li {
    margin-bottom: 0.5rem;
  }

  .markdown-content li::marker {
    font-weight: bold;
  }

  .markdown-content hr {
    border: none;
    height: 4px;
    margin: 2rem 0;
    background: linear-gradient(to right, #d1d5db, #9ca3af, #d1d5db);
    border-radius: 2px;
  }

  .markdown-content blockquote {
    border-left: 4px solid #9ca3af;
    padding-left: 1rem;
    margin: 1.5rem 0;
    color: #374151;
    font-style: italic;
  }

  .markdown-content pre {
    background: #f5f5f5;
    padding: 1rem;
    margin: 1.5rem 0;
    border-radius: 6px;
    overflow-x: auto;
    font-size: 0.95rem;
    font-family: 'Courier New', monospace;
    color: #1f2937;
  }

  .markdown-content code {
    background: #f3f4f6;
    padding: 0.2rem 0.4rem;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.95rem;
    color: #1f2937;
  }

  .markdown-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 1.5rem;
  }

  .markdown-content thead th {
    background: #f9fafb;
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid #e5e7eb;
    padding: 0.75rem;
    color: #1f2937;
  }

  .markdown-content tbody tr {
    border-bottom: 1px solid #e5e7eb;
  }

  .markdown-content td {
    padding: 0.75rem;
    vertical-align: top;
  }

  .markdown-content img {
    max-width: 100%;
    height: auto;
    margin: 1.5rem 0;
    border-radius: 4px;
  }

  .markdown-content sup {
    font-size: 0.8em;
    vertical-align: super;
  }

  .markdown-content abbr[title] {
    border-bottom: 1px dotted #6b7280;
    cursor: help;
  }

  .sr-only:focus {
    position: absolute;
    top: 0.5rem;
    left: 0.5rem;
    background: #1d4ed8;
    color: #fff;
    padding: 0.5rem;
    border-radius: 0.25rem;
    width: auto;
    height: auto;
    margin: 0;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  :focus {
    outline: 2px dashed #000;
    outline-offset: 4px;
  }

  .styled-hr {
    border: none;
    height: 4px;
    background: linear-gradient(to right, #e0e0e0, #b5b5b5, #e0e0e0);
    border-radius: 2px;
    margin: 1.5rem 0;
  }

  #tocContainer h2 {
    font-family: 'Montserrat', sans-serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #1f2937;
    margin-bottom: 1rem;
  }

  #tocContainer ul {
    list-style: none;
    padding-left: 0;
  }

  #tocContainer li {
    margin-bottom: 0.25rem;
    position: relative;
  }

  #tocContainer ul ul {
    margin-left: 1rem;
    padding-left: 0.75rem;
    border-left: 1px dashed #d1d5db;
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }

  #tocContainer li > a::before {
    content: 'â€¢';
    color: #2563eb;
    display: inline-block;
    margin-right: 0.5rem;
    font-size: 0.9rem;
  }

  #tocContainer a {
    text-decoration: none;
    color: #2563eb;
    font-weight: 500;
    transition: color 0.2s ease;
    display: inline-block;
    padding: 0.25rem 0.5rem;
  }

  #tocContainer a:hover,
  #tocContainer a:focus {
    color: #1d4ed8;
    text-decoration: underline;
  }
</style>
</head>
<body class="font-sans leading-relaxed text-gray-800">

<a href="#mainContent" class="sr-only">Skip to content</a>

<!-- Hero Section -->
<div class="bg-white py-16 px-4 sm:px-6 lg:px-8 mb-10 shadow-md">
  <div class="max-w-3xl mx-auto text-center">
    <h1 class="text-4xl font-bold font-display text-gray-900 mb-6">Welcome to the Denture Care Guide</h1>
    <p class="text-xl text-gray-700 mb-8">
      I created this website to help people understand dentures more easily. Both of my parents had to get dentures and they struggled to find clear, accessible information. With the help of ChatGPT, I've put together this resource to guide you through the process, answer your questions, and help you maintain a confident smile.
    </p>
    <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6">
      <a href="https://www.buymeacoffee.com/GarbledHamster" target="_blank" rel="noopener noreferrer" class="inline-block bg-primary text-white font-semibold px-6 py-3 rounded-md hover:bg-primary-light transition duration-300">
        Buy Me a Coffee
      </a>
      <a href="https://joerice.me" class="inline-block bg-gray-100 text-gray-800 font-semibold px-6 py-3 rounded-md hover:bg-gray-200 transition duration-300">
        About Me
      </a>
    </div>
  </div>
</div>

<div class="container mx-auto px-4 py-10">
  <h1 class="text-5xl font-bold text-center text-primary mb-16 font-display">Denture Care Guide for First-Time Wearers</h1>

  <!-- TOC Container -->
  <div id="tocContainer" class="bg-white shadow-xl rounded-lg p-10 mb-10 hidden">
    <h2>Table of Contents</h2>
    <div id="tocContent"></div>
  </div>

  <main id="mainContent" class="space-y-20">
    <section id="historySection" class="bg-white shadow-xl rounded-lg p-10">
      <h2 class="text-3xl font-semibold text-gray-900 mb-8 font-display">Brief History of Dentures</h2>
      <hr class="styled-hr">
      <article id="historyContent" class="markdown-content">Loading...</article>
    </section>

    <section id="aboutSection" class="bg-white shadow-xl rounded-lg p-10">
      <h2 class="text-3xl font-semibold text-gray-900 mb-8 font-display">About Denture Care</h2>
      <hr class="styled-hr">
      <article id="aboutContent" class="markdown-content">Loading...</article>
    </section>

    <section id="faqsSection" class="bg-white shadow-xl rounded-lg p-10">
      <h2 class="text-3xl font-semibold text-gray-900 mb-8 font-display">Frequently Asked Questions</h2>
      <hr class="styled-hr">
      <article id="faqsContent" class="markdown-content">Loading...</article>
    </section>

    <section id="maintenanceSection" class="bg-white shadow-xl rounded-lg p-10">
      <h2 class="text-3xl font-semibold text-gray-900 mb-8 font-display">Denture Maintenance</h2>
      <hr class="styled-hr">
      <article id="maintenanceContent" class="markdown-content">Loading...</article>
    </section>

    <section id="quizSection" class="bg-white shadow-xl rounded-lg p-10">
      <h2 class="text-3xl font-semibold text-gray-900 mb-8 font-display">Quiz</h2>
      <hr class="styled-hr">
      <p class="mb-6 text-lg text-gray-700">Test your knowledge! Please answer all questions to see your score.</p>
      <form id="quizForm" class="space-y-8" aria-labelledby="quizHeading"></form>
      <div class="text-center mt-10">
        <button type="button" id="submitQuiz" class="px-8 py-4 bg-accent text-white rounded-lg hover:bg-accent-hover transition duration-300 text-lg font-semibold shadow-md">Submit</button>
      </div>
    </section>
  </main>
</div>

<div id="resultModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 hidden z-50" role="dialog" aria-modal="true" aria-labelledby="resultTitle">
  <div class="bg-white rounded-lg shadow-lg p-8 w-11/12 max-w-md">
    <h2 id="resultTitle" class="text-2xl font-semibold text-green-600 mb-6 font-display">Quiz Results</h2>
    <hr class="styled-hr">
    <p id="resultText" class="text-gray-700 mb-6 text-lg"></p>
    <div class="flex justify-end space-x-4">
      <button id="retakeQuiz" class="px-4 py-2 bg-primary text-white rounded hover:bg-primary-light transition duration-300">Retake</button>
      <button id="closeModal" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition duration-300">Close</button>
    </div>
  </div>
</div>

<script>
  let quizData = [];
  let lastFocusedElementBeforeModal;

  function trapFocus(element) {
    const focusableEls = element.querySelectorAll('a[href], button, textarea, input[type="radio"], input[type="checkbox"], input[type="text"], select, [tabindex]:not([tabindex="-1"])');
    const firstFocusableEl = focusableEls[0];  
    const lastFocusableEl = focusableEls[focusableEls.length - 1];

    element.addEventListener('keydown', function(e) {
      let isTabPressed = (e.key === 'Tab' || e.keyCode === 9);
      if (!isTabPressed) return;

      if (e.shiftKey) {
        if (document.activeElement === firstFocusableEl) {
          lastFocusableEl.focus();
          e.preventDefault();
        }
      } else {
        if (document.activeElement === lastFocusableEl) {
          firstFocusableEl.focus();
          e.preventDefault();
        }
      }
    });
  }

  function openModal() {
    const modal = document.getElementById('resultModal');
    modal.classList.remove('hidden');
    lastFocusedElementBeforeModal = document.activeElement;
    const modalTitle = document.getElementById('resultTitle');
    modalTitle.focus();
    trapFocus(modal);
  }

  function closeModal() {
    const modal = document.getElementById('resultModal');
    modal.classList.add('hidden');
    if (lastFocusedElementBeforeModal) {
      lastFocusedElementBeforeModal.focus();
    }
  }

  function loadMarkdown(url, elementId) {
    return fetch(url)
      .then(response => {
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        return response.text();
      })
      .then(data => {
        document.getElementById(elementId).innerHTML = marked.parse(data);
      })
      .catch(error => {
        console.error(`Error loading ${url}:`, error);
        document.getElementById(elementId).innerText = 'Failed to load content.';
      });
  }

  function generateTOC() {
    const mainContent = document.getElementById('mainContent');
    const headings = mainContent.querySelectorAll('.markdown-content h1, .markdown-content h2, .markdown-content h3, .markdown-content h4, .markdown-content h5, .markdown-content h6');

    if (headings.length === 0) return;

    const tocContainer = document.getElementById('tocContainer');
    const tocContent = document.getElementById('tocContent');

    tocContainer.classList.remove('hidden');

    let currentLevel = 1;
    let currentList = document.createElement('ul');
    tocContent.appendChild(currentList);

    headings.forEach(heading => {
      const level = parseInt(heading.tagName.replace('H', ''), 10);

      if (!heading.id) {
        heading.id = heading.textContent.toLowerCase().replace(/[^\w]+/g, '-');
      }

      const listItem = document.createElement('li');
      const link = document.createElement('a');
      link.href = `#${heading.id}`;
      link.textContent = heading.textContent;
      
      listItem.appendChild(link);

      if (level > currentLevel) {
        for (let i = currentLevel; i < level; i++) {
          const newList = document.createElement('ul');
          currentList.lastElementChild.appendChild(newList);
          currentList = newList;
        }
      } else if (level < currentLevel) {
        for (let i = currentLevel; i > level; i--) {
          currentList = currentList.parentElement.closest('ul');
        }
      }

      currentList.appendChild(listItem);
      currentLevel = level;
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    Promise.all([
      loadMarkdown('data/history.md', 'historyContent'),
      loadMarkdown('data/about.md', 'aboutContent'),
      loadMarkdown('data/faqs.md', 'faqsContent'),
      loadMarkdown('data/maintenance.md', 'maintenanceContent')
    ])
    .then(() => {
      generateTOC();
    })
    .catch(error => console.error('Error loading Markdown files:', error));

    fetch('data/questionnaire.json')
      .then(response => {
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        return response.json();
      })
      .then(data => {
        quizData = data;
        // Shuffle the questions array
        const shuffledQuestions = data.questions.sort(() => 0.5 - Math.random());

        // Select how many questions you want to display, for example 10
        const selectedQuestions = shuffledQuestions.slice(0, 10);

        const form = document.getElementById('quizForm');
        selectedQuestions.forEach((question, index) => {
          const questionHtml = `
<div class="mb-6">
  <p class="text-lg text-gray-800 mb-4">${index + 1}. ${question.text}</p>
  <div class="space-y-3">
    ${question.options.map((option, i) => `
    <div class="flex items-center">
      <input type="radio" id="q${index + 1}o${i}" name="question${index + 1}" value="${option}" class="mr-3 h-5 w-5 text-primary focus:ring-primary-light border-gray-300" required>
      <label for="q${index + 1}o${i}" class="text-gray-700 text-base">${option}</label>
    </div>
    `).join('')}
  </div>
</div>`;
          form.insertAdjacentHTML('beforeend', questionHtml);
        });

        // Update quizData.questions so scoring matches the displayed subset
        quizData.questions = selectedQuestions;
      })
      .catch(error => console.error('Error loading questionnaire.json:', error));
  });

  document.getElementById('submitQuiz').addEventListener('click', function() {
    const form = document.getElementById('quizForm');
    const formData = new FormData(form);
    const answers = {};
    let score = 0;
    for (let [key, value] of formData.entries()) {
      answers[key] = value;
    }
    if (Object.keys(answers).length < quizData.questions.length) {
      alert('Please answer all questions!');
      return;
    }
    quizData.questions.forEach((question, index) => {
      const userAnswer = answers[`question${index + 1}`];
      if (userAnswer === question.correct) {
        score++;
      }
    });
    document.getElementById('resultText').innerText = `You scored ${score} out of ${quizData.questions.length}!`;
    openModal();
  });

  document.getElementById('closeModal').addEventListener('click', closeModal);
  document.getElementById('retakeQuiz').addEventListener('click', function() {
    document.getElementById('quizForm').reset();
    closeModal();
  });
</script>
</body>
</html>
